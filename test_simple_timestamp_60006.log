============================================================
SGLang 时间戳测试工具（简化版）
============================================================

测试服务器: http://localhost:60005
--------------------------------------------------
状态码: 200
响应头 Content-Type: application/json
响应长度: 311 字符

响应的顶层键: ['text', 'meta_info']
text 字段内容: ! I'm a new blogger and I'm excited...

✅ 找到 meta_info!
meta_info 的键: ['id', 'finish_reason', 'prompt_tokens', 'completion_tokens', 'cached_tokens', 'server_created_time', 'server_first_token_time', 'e2e_latency']

完整的 meta_info 内容:
{
  "id": "097fef1ccacc45f390dbf9272bab4f45",
  "finish_reason": {
    "type": "length",
    "length": 10
  },
  "prompt_tokens": 3,
  "completion_tokens": 10,
  "cached_tokens": 1,
  "server_created_time": 1753783651.7379122,
  "server_first_token_time": null,
  "e2e_latency": 0.07801222801208496
}

时间戳字段检查:
  ✅ server_created_time: 1753783651.7379122
  ✅ server_first_token_time: None
  ❌ created_time: 不存在
  ❌ first_token_time: 不存在
  ❌ time_cost: 不存在

完整响应内容（前1000字符）:
{
  "text": "! I'm a new blogger and I'm excited",
  "meta_info": {
    "id": "097fef1ccacc45f390dbf9272bab4f45",
    "finish_reason": {
      "type": "length",
      "length": 10
    },
    "prompt_tokens": 3,
    "completion_tokens": 10,
    "cached_tokens": 1,
    "server_created_time": 1753783651.7379122,
    "server_first_token_time": null,
    "e2e_latency": 0.07801222801208496
  }
}

测试服务器: http://localhost:60006
--------------------------------------------------
状态码: 200
响应头 Content-Type: application/json
响应长度: 311 字符

响应的顶层键: ['text', 'meta_info']
text 字段内容: ! I'm a new blogger and I'm excited...

✅ 找到 meta_info!
meta_info 的键: ['id', 'finish_reason', 'prompt_tokens', 'completion_tokens', 'cached_tokens', 'server_created_time', 'server_first_token_time', 'e2e_latency']

完整的 meta_info 内容:
{
  "id": "d06aeb64866b44f983b385d312ed83f6",
  "finish_reason": {
    "type": "length",
    "length": 10
  },
  "prompt_tokens": 3,
  "completion_tokens": 10,
  "cached_tokens": 1,
  "server_created_time": 1753783651.8184798,
  "server_first_token_time": null,
  "e2e_latency": 0.07670235633850098
}

时间戳字段检查:
  ✅ server_created_time: 1753783651.8184798
  ✅ server_first_token_time: None
  ❌ created_time: 不存在
  ❌ first_token_time: 不存在
  ❌ time_cost: 不存在

完整响应内容（前1000字符）:
{
  "text": "! I'm a new blogger and I'm excited",
  "meta_info": {
    "id": "d06aeb64866b44f983b385d312ed83f6",
    "finish_reason": {
      "type": "length",
      "length": 10
    },
    "prompt_tokens": 3,
    "completion_tokens": 10,
    "cached_tokens": 1,
    "server_created_time": 1753783651.8184798,
    "server_first_token_time": null,
    "e2e_latency": 0.07670235633850098
  }
}

测试路由器: http://localhost:60009
--------------------------------------------------
状态码: 200

响应的顶层键: ['text', 'meta_info']

✅ 路由器响应包含 meta_info
meta_info 内容:
{
  "id": "d251d8cb8151478594dbe653c6289586",
  "finish_reason": {
    "type": "length",
    "length": 10
  },
  "prompt_tokens": 4,
  "completion_tokens": 10,
  "cached_tokens": 2,
  "server_created_time": 1753783651.8977973,
  "server_first_token_time": null,
  "e2e_latency": 0.06965208053588867
}

响应内容（前500字符）:
{
  "text": "! I'm a router, and I'm here",
  "meta_info": {
    "id": "d251d8cb8151478594dbe653c6289586",
    "finish_reason": {
      "type": "length",
      "length": 10
    },
    "prompt_tokens": 4,
    "completion_tokens": 10,
    "cached_tokens": 2,
    "server_created_time": 1753783651.8977973,
    "server_first_token_time": null,
    "e2e_latency": 0.06965208053588867
  }
}

============================================================
测试完成
============================================================
