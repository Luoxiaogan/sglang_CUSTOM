
# Add this to scheduler_output_processor_mixin.py in stream_output_generation method
# Around line 591 where queue times are collected:

# Collect queue time information
queue_start_val = req.queue_time_start if hasattr(req, 'queue_time_start') else None
queue_end_val = req.queue_time_end if hasattr(req, 'queue_time_end') else None

if hasattr(self, 'logger'):
    self.logger.info(f"[DEBUG] Collecting queue times for req {req.rid}: start={queue_start_val}, end={queue_end_val}")

queue_time_start.append(queue_start_val)
queue_time_end.append(queue_end_val)

# And before sending BatchTokenIDOut (around line 682):
if hasattr(self, 'logger'):
    self.logger.info(f"[DEBUG] Sending BatchTokenIDOut with {len(rids)} requests")
    self.logger.info(f"[DEBUG] queue_time_start list: {queue_time_start[:3]}...")  # First 3 values
    self.logger.info(f"[DEBUG] queue_time_end list: {queue_time_end[:3]}...")
    self.logger.info(f"[DEBUG] spec_verify_ct length: {len(spec_verify_ct)}")
