
# Add this to tokenizer_manager.py in _handle_batch_output method
# Around line 1417 where queue timestamps are added to meta_info:

# Add queue time tracking from scheduler
queue_start = recv_obj.queue_time_start[i] if hasattr(recv_obj, 'queue_time_start') and recv_obj.queue_time_start else None
queue_end = recv_obj.queue_time_end[i] if hasattr(recv_obj, 'queue_time_end') and recv_obj.queue_time_end else None

logger.info(f"[DEBUG] Processing request {rid}: queue_start={queue_start}, queue_end={queue_end}")

meta_info.update({
    # ... existing fields ...
    "queue_time_start": queue_start,
    "queue_time_end": queue_end,
})
