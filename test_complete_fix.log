Queue时间戳完整修复验证
================================================================================
测试时间: 2025-07-29 23:40:46
直连服务器: http://localhost:60005/generate
路由器地址: http://localhost:60009/generate


测试 直连服务器: http://localhost:60005/generate
------------------------------------------------------------

请求 1: Hello, this is a test...
  响应延迟: 102.1 ms
  server_created_time: 1753803646.446297
  server_first_token_time: None
  queue_time_start: 1753803646.4472163
  queue_time_end: 1753803646.44816
  ✅ hidden_states字段存在（长度: 0）
  ✅ 纯队列时间: 0.944 ms
  生成文本:  message. Hello, this is a test message....

请求 2: What is the meaning of life?...
  响应延迟: 137.3 ms
  server_created_time: 1753803647.0484397
  server_first_token_time: None
  queue_time_start: 1753803647.0489495
  queue_time_end: 1753803647.0491881
  ✅ hidden_states字段存在（长度: 0）
  ✅ 纯队列时间: 0.239 ms
  生成文本:  Is it to find happiness, to achieve success, to m...

请求 3: Explain how neural networks wo...
  响应延迟: 204.6 ms
  server_created_time: 1753803647.6861658
  server_first_token_time: None
  queue_time_start: 1753803647.686653
  queue_time_end: 1753803647.6868641
  ✅ hidden_states字段存在（长度: 0）
  ✅ 纯队列时间: 0.211 ms
  生成文本: 
Neural networks are a type of machine learning al...

直连服务器 统计:
  成功率: 3/3 (100%)
  平均队列时间: 0.465 ms
  最小/最大队列时间: 0.211 / 0.944 ms


测试 路由器: http://localhost:60009/generate
------------------------------------------------------------

请求 1: Hello, this is a test...
  响应延迟: 74.7 ms
  server_created_time: 1753803648.392033
  server_first_token_time: None
  queue_time_start: 1753803648.3924913
  queue_time_end: 1753803648.3927288
  ✅ hidden_states字段存在（长度: 0）
  ✅ 纯队列时间: 0.237 ms
  生成文本:  post to see how the new blog layout looks....

请求 2: What is the meaning of life?...
  响应延迟: 139.8 ms
  server_created_time: 1753803648.9669933
  server_first_token_time: None
  queue_time_start: 1753803648.9674547
  queue_time_end: 1753803648.9676967
  ✅ hidden_states字段存在（长度: 0）
  ✅ 纯队列时间: 0.242 ms
  生成文本:  Is it to find happiness, to achieve success, to m...

请求 3: Explain how neural networks wo...
  响应延迟: 204.1 ms
  server_created_time: 1753803649.607233
  server_first_token_time: None
  queue_time_start: 1753803649.6076713
  queue_time_end: 1753803649.6078708
  ✅ hidden_states字段存在（长度: 0）
  ✅ 纯队列时间: 0.200 ms
  生成文本: 
Neural networks are a type of machine learning mo...

路由器 统计:
  成功率: 3/3 (100%)
  平均队列时间: 0.226 ms
  最小/最大队列时间: 0.200 / 0.242 ms

================================================================================
测试总结
================================================================================
✅ 修复成功！Queue时间戳正确传递到客户端

关键修复点:
1. BatchTokenIDOut 包含 queue_time_start/end 字段
2. BatchStrOut 添加了相同的字段
3. detokenizer_manager 正确传递这些字段
4. output_hidden_states 初始化问题已修复
